---
layout:     post
title:      "系统监控整体要求"
subtitle:   "系统监控也是一门艺术"
date:       2019-06-20
author:     "xmeng"
header-img: "img/post-bg-os-metro.jpg"
catalog: true
tags:
  - xmeng 工作笔记
  - monitor
---

## 监控系统要求
![image](/img/in-post/monitor_01.png)
- 数据采集：对监控数据采集
- 数据存储：将监控数据持久化存储，用于历时查询
- 数据分析：数据按需处理，例如阈值对比、聚合
- 数据展示：Web页面展示
- 监控告警：电话，邮件，微信，短信


### 1、监控对象
借鉴专门做监控产品公司:https://www.jiankongbao.com 

#### 硬件监控
温度，硬件故障等。云服务器天然支持

#### 系统监控
CPU、内存、硬盘利用率，硬件I/O，网卡流量，TCP状态，进程数

#### 应用监控
mysql、redis、nginx、tomcat等业务涉及的服务都要监控起来（故障只是基本，扩展连接数、并发等相关指标）

#### 日志监控
系统日志、服务日志、访问日志、错误日志，这个现成的开源的ELK解决方案（直接通知管理员）

#### 安全监控
视分析结果，判断是否直接屏蔽掉
- 可以利用Nginx+Lua实现WAF功能，并存储到ES，通过Kibana可视化展示不同的攻击类型。
- 用户登录数，passwd文件变化，其他关键文件改动。

#### API监控
收集API接口操作方法请求，分析负载、可用性、正确性、响应时间

#### 业务监控
每分钟产生多少订单、注册多少用户、多少活跃用户、推广活动效果（产生多少用户、多少利润）

#### 流量分析
根据流量获取用户相关信息，例如用户地理位置、某页面访问状况、页面停留时间等。监控各地区访问业务网络情况，优化用户体验和提升收益

### 2、监控指标
cpu达到多少报警？可用内存达到多少？响应码为多少报警？

### 3、告警阈值定义
设定具体的值。

### 4、故障处理流程
运维规范，故障分等级、预计多长时间解决，是否提升故障等级。

